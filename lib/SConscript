# -*- python -*-
Import('env')

sysLibs = ['z', 'pthread']
if env['PLATFORM'] == 'posix':
    sysLibs += ['rt']

env.SharedLibrary('ap',
    map(lambda str: '../src/' + str,
        ['Time.cc',
         'Random.cc',
         'SpatialUtil.cc',
         'ChunkToNameMappings.cc',
         'CircularRegion.cc',
         'RectangularRegion.cc',
         'Mutex.cc',
         'Condition.cc',
         'Exceptions.cc',
         'ScopeGuard.cc',
         'Bitset.cc',
         'Object.cc',
         'Results.cc',
         'Utils.cc',
         'ChunkManager.cc',
         'Stages.cc']) +
    map(lambda str: '../src/io/' + str,
        ['FileIo.cc',
         'ResultFormatters.cc']),
    LIBS=env.getlibs('boost wcslib utils daf_base daf_data daf_persistence pex_exceptions pex_logging pex_policy security afw') + sysLibs)

